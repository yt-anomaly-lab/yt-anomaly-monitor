<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>YouTube観測者</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="style.css">

  <!-- ★追加：Plotly -->
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
</head>
<body>

<header>
  <h1>YouTube観測者</h1>
</header>

<div class="layout">
  <aside class="side">
    <section>
      <h2>異常値が上位の動画</h2>
      <div id="red-top"></div>
    </section>

    <section>
      <h2>Channels（異常度ワースト順）</h2>
      <div id="channel-list"></div>
    </section>

    <section>
      <h2>about</h2>
      <div class="about">
        <p>
          本ページは「再生挙動の統計的乖離」を可視化します。<br>
          特定の不正を断定するものではありません。
        </p>

        <p>
          解析は<br>
          ・再生数と公開日数<br>
          ・再生数と高評価数<br>
          のそれぞれにおいて、そのチャンネルの実力を<br>
          フィッティングモデルとして自動作成し、<br>
          両解析で乖離した異常値をマークします。
        </p>

        <p>
          異常値動画数が３以上あるチャンネルはウオッチリスト入りして定期観測します。<br>
          ウオッチリストは履歴を保持し、一度異常値を検出した動画は削除後も恒久的に異常値として扱います。
        </p>
      </div>
    </section>
  </aside>

  <main class="main">
    <section>
      <h2>再生数乖離評価</h2>

      <!-- ★変更：canvas → div（Plotly描画先） -->
      <div id="views-days" style="width:100%;height:320px;background:rgba(0,0,0,.2);border-radius:8px;"></div>

      <div class="graph-desc">
        このグラフは再生数と公開日数を散布図でプロットしたものです。<br>
        右に行くほど古い<br>
        上に行くほど再生数が多い<br>
        を意味します。<br>
        オレンジ線はモデル化した期待値<br>
        グリーン線は乖離判定に用いる期待値上限です
      </div>
    </section>

    <section>
      <h2>高評価乖離評価</h2>

      <!-- ★変更：canvas → div（Plotly描画先） -->
      <div id="views-likes" style="width:100%;height:320px;background:rgba(0,0,0,.2);border-radius:8px;"></div>

      <div class="graph-desc">
        このグラフは再生数と高評価を散布図でプロットしたものです。<br>
        右に行くほど再生が多い<br>
        上に行くほど高評価が多い<br>
        を意味します。<br>
        オレンジ線はモデル化した期待値<br>
        グリーン線は乖離判定に用いる期待値上限です
      </div>
    </section>
  </main>
</div>

<script src="app.js?v=20260105"></script>
</body>
</html>
